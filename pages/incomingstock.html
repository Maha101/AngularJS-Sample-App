<div class="container">
    <h2>{{message}}</h2>
    <div class="well">
        <style>
            input[type=number] {
                -moz-appearance:textfield;
            }
        </style>
        <div ng:controller="CartForm">
            <table class="table">
                <tr>

                    <th>Item Name</th>
                    <th>Qty</th>
                    <th>Cost</th>                    
                    <th></th>
                </tr>
                <tr ng:repeat="item in invoice.items">
                    <td><input type="text" ng:model="item.description" class="input-small"></td>
                    <td><input type="number" ng:model="item.qty" ng:required class="input-mini" step=".001"></td>
                    <td><input type="number" ng:model="item.cost" ng:required class="input-mini" step="1"></td>                    
                    <td>
                        [<a href ng:click="removeItem($index)">X</a>]
                    </td>
                </tr>
                <tr>
                    <td><a href ng:click="addItem()" class="btn btn-primary">add item</a></td>                    
                    <td>Total: {{total_weight()}}</td>
                    <td>Total: {{total_cost() | currency}}</td>
                </tr>
            </table>
        </div>
        <script>
            function CartForm($scope) {
                $scope.invoice = {
                    items: []
                };

                $scope.addItem = function () {
                    $scope.invoice.items.push({
                        qty: 0,
                        description: '',
                        cost: 0
                    });
                },

                $scope.removeItem = function (index) {
                    $scope.invoice.items.splice(index, 1);
                },

                $scope.total_cost = function () {
                    var total = 0;
                    angular.forEach($scope.invoice.items, function (item) {
                        total += item.cost;
                    })

                    return total;
                }

                $scope.total_weight = function () {
                    var total = 0;
                    angular.forEach($scope.invoice.items, function (item) {
                        total += item.qty;
                    })

                    return total;
                }
            }
        </script>
    </div>
</div>
